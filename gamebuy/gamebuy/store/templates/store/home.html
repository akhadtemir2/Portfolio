{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'styles/style_exp.css' %}">
    <title>All Games</title>
</head>
<body>
    <div class="header-container">
        <div class="logo-img"><img src="{% static 'img/logo.png' %}" alt=""></div>
   
        <section class="navbar">
            <div class="logo"><a href="{% url 'home' %}"><h3>STORE</h3></a></div>
            <a href=""><h3>МОЙ ИНВЕНТАРЬ</h3></a>
            <a href=""><h3>БИБЛИОТЕКА</h3></a>
            <a href=""><h3>СООБЩЕСТВО</h3></a>
            <section class="right-nav">     
                <a href="" class="support-btn"><h4>Поддержка</h4></a>
                <div class="vector"><img src="{% static 'img/Vector.png' %}" alt=""></div>
                {% if user.is_authenticated %}
                    <a href="{% url 'profile' %}" class="login-btn"><h4>{{ user.username }}</h4></a>
                    <a href="{% url 'logout' %}" class="signup-btn"><h4>Выход</h4></a>
                {% else %}
                    <a href="{% url 'login' %}" class="login-btn"><h4>Вход</h4></a>
                    <a href="{% url 'register' %}" class="signup-btn"><h4>Регистрация</h4></a>
                {% endif %}
            </section> 
        </section>
    </div>
      
    <section class="sub-header">
        <div class="search-btn">
            <img src="{% static 'img/search.png' %}" alt="">
            <a href="">Искать в Магазине</a>
            <div class="filter"><img src="{% static 'img/filter.png' %}" alt=""></div>
        </div>
     
        <div class="text-area">
            <a href="{% url 'main_page' %}" class="nav-home">Главное</a>
            <a href="{% url 'game_list' %}" class="nav-games">Все игры</a>
            <a href="{% url 'bin_basket_view' %}" class="nav-cart">Корзина</a>
        </div>  
    </section>

    <section class="all-games">
        {% for game in games %}
        <div class="game-card">
            <div class="game-img">
                {% if game.image %}
                    <img src="{{ game.image.url }}" alt="{{ game.title }}">
                {% else %}
                    <img src="{% static 'img/placeholder.png' %}" alt="{{ game.title }}">
                {% endif %}
            </div>
            
            <div class="name-game">
                <a href="{% url 'game_detail' game.id %}">{{ game.title }}</a>
            </div>
            
            {% if game.is_free %}
                <div class="price-game"><span>FREE</span></div>
            {% elif game.discount_percentage > 0 %}
                <div class="sale-game">
                    <div class="sales"><span>-{{ game.discount_percentage }}%</span></div>
                    <div class="sale-price"><span>{{ game.price|floatformat:0 }} KZT</span></div>
                    <div class="price-game"><span>{{ game.get_discounted_price|floatformat:0 }} KZT</span></div>
                </div>
            {% elif game.price %}
                <div class="price-game"><span>{{ game.price|floatformat:0 }} KZT</span></div>
            {% endif %}
        </div>
        {% empty %}
        <div style="grid-column: 1/-1; text-align: center; padding: 50px; color: white;">
            <h2>Игры не найдены</h2>
            <p>В данный момент в магазине нет доступных игр.</p>
        </div>
        {% endfor %}
    </section>

    <div class="footer">
        <img src="{% static 'img/footer.png' %}" alt="">
    </div>
</body>
</html>